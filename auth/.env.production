# 生产环境配置

# 服务器配置
PORT=8101
NODE_ENV=production

# JWT配置
JWT_SYMMETRIC_ENCRYPTION=false
JWT_SECRET_KEY=REPLACE_WITH_STRONG_SECRET_KEY
JWT_PUBLIC_KEY=/etc/auth/keys/public.key
JWT_PRIVATE_KEY=/etc/auth/keys/private.key
JWT_EXPIRATION_TIME=15m
JWT_REFRESH_EXPIRATION=7d
JWT_ALGORITHM=RS256
JWT_AUDIENCE=prod-auth-service
JWT_ISSUER=prod-auth-server

# Session配置
SESSION_SECRET=REPLACE_WITH_STRONG_SESSION_SECRET
SESSION_EXPIRY=15m
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict
SESSION_COOKIE_PATH=/
SESSION_DOMAIN=.yourdomain.com

# 数据库配置
DB_TYPE=mysql
DB_HOST=your-db-host
DB_PORT=3306
DB_USERNAME=prod_user
DB_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
DB_DATABASE=auth_service_prod
DB_SYNC=false
DB_LOGGING=false
DB_MIGRATIONS_RUN=true
DB_SSL=true
DB_ENCRYPTION=true

# Redis配置
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
REDIS_DB=0
REDIS_TTL=86400
REDIS_TLS=true
REDIS_SENTINEL_ENABLED=true

# 速率限制配置
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=50
LOGIN_RATE_LIMIT_WINDOW_MS=3600000
LOGIN_RATE_LIMIT_MAX=5
IP_RATE_LIMIT_ENABLED=true
SLIDING_WINDOW_RATE_LIMIT=true

# 安全配置
ENABLE_2FA=true
PASSWORD_SALT_ROUNDS=12
MIN_PASSWORD_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true
PASSWORD_MAX_AGE_DAYS=90
PASSWORD_HISTORY_COUNT=5
MAX_LOGIN_ATTEMPTS=3
LOGIN_LOCKOUT_TIME=30m
ACCOUNT_IDLE_LOCK_DAYS=90
CORS_ORIGINS=https://yourdomain.com,https://api.yourdomain.com
HELMET_ENABLED=true
STRICT_TRANSPORT_SECURITY=true
XSS_PROTECTION=true
CONTENT_TYPE_OPTIONS=true
FRAME_OPTIONS=DENY

# Swagger配置
SWAGGER_ENABLED=false
SWAGGER_TITLE=NestJS Auth API (Prod)
SWAGGER_DESCRIPTION=认证系统 API 文档 - 生产环境
SWAGGER_VERSION=1.0
SWAGGER_PATH=api/docs

# 加密与证书
DATA_ENCRYPTION_KEY=REPLACE_WITH_STRONG_ENCRYPTION_KEY
SSL_KEY_PATH=/etc/ssl/private/auth.key
SSL_CERT_PATH=/etc/ssl/certs/auth.crt
HTTPS_ENABLED=true

# OAuth配置
OAUTH_GOOGLE_ENABLED=true
OAUTH_GOOGLE_CLIENT_ID=your_prod_google_client_id
OAUTH_GOOGLE_CLIENT_SECRET=your_prod_google_client_secret
OAUTH_GOOGLE_CALLBACK_URL=https://api.yourdomain.com/auth/google/callback

OAUTH_GITHUB_ENABLED=true
OAUTH_GITHUB_CLIENT_ID=your_prod_github_client_id
OAUTH_GITHUB_CLIENT_SECRET=your_prod_github_client_secret
OAUTH_GITHUB_CALLBACK_URL=https://api.yourdomain.com/auth/github/callback

# SMTP配置（用于邮件通知）
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@yourdomain.com
SMTP_PASS=REPLACE_WITH_STRONG_PASSWORD
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=Auth Service
EMAIL_TEMPLATES_DIR=/etc/auth/templates/email

# 日志配置
LOG_FORMAT=json
LOG_LEVEL=info
LOG_DIR=/var/log/auth
LOG_MAX_FILES=10
LOG_MAX_SIZE=100m
LOG_CONSOLE_ENABLED=false
LOG_ROTATION_ENABLED=true
SECURITY_EVENTS_LOG=true
AUDIT_LOG_ENABLED=true 